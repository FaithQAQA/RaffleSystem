<app-header></app-header>


<ion-content class="modern-history-content">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Your Raffle History</h1>
    <p class="page-subtitle">Track your participation and results</p>
  </div>

  <!-- Raffle List -->
  <div class="history-container" *ngIf="raffles.length > 0; else noData">
    <div
      class="raffle-card"
      *ngFor="let raffle of raffles; let i = index"
      [style.animation-delay]="(i * 0.1) + 's'"
    >
      <div class="card-content">
        <div class="raffle-header">
          <h2 class="raffle-title">{{ raffle.title }}</h2>
          <ion-chip [color]="getStatusColor(raffle.status)" class="status-chip">
            <ion-icon [name]="getStatusIcon(raffle.status)"></ion-icon>
            <ion-label>{{ raffle.status | titlecase }}</ion-label>
          </ion-chip>
        </div>

        <div class="raffle-details">
          <div class="detail-item">
            <ion-icon name="ticket-outline" class="detail-icon"></ion-icon>
            <span class="detail-label">Tickets Bought:</span>
            <span class="detail-value">{{ raffle.ticketsBought }}</span>
          </div>

          <div class="detail-item" *ngIf="raffle.status === 'completed'">
            <ion-icon name="trophy-outline" class="detail-icon"></ion-icon>
            <span class="detail-label">Result:</span>
            <span
              class="detail-value"
              [class]="raffle.didUserWin ? 'win-text' : 'lose-text'"
            >
              {{ raffle.didUserWin ? 'You Won ' : 'You Lost ' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <ng-template #noData>
    <div class="empty-state">
      <ion-icon name="ticket-outline" class="empty-icon"></ion-icon>
      <h2 class="empty-title">No Raffle History</h2>
      <p class="empty-text">You haven't joined any raffles yet.</p>
      <ion-button
        routerLink="/view-raffles"
        color="primary"
        class="empty-action-btn"
      >
        <ion-icon name="ticket-outline" slot="start"></ion-icon>
        Browse Raffles
      </ion-button>
    </div>
  </ng-template>
</ion-content>
