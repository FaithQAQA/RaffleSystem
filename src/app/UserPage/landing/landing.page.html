<ion-app>
  <!-- Header -->
  <app-header></app-header>

  <!-- Main Content -->
  <ion-content class="modern-content ion-padding">
    <!-- Featured Raffles Hero Section -->
    <section class="feature-raffle">
      <div class="hero-content">
        <h2 class="raffle-title">Our Featured Raffles</h2>
        <p class="raffle-subtitle">
          Join us for a chance to win exciting prizes and support a great cause!
        </p>
      </div>
    </section>

    <div aria-live="polite" class="visually-hidden" id="liveRegion"></div>

    <!-- Raffles Grid -->
    <ion-grid class="raffle-gallery">
      <ion-row>
        <ion-col
          *ngFor="let raffle of recentRaffles"
          size="12"
          size-md="4"
          class="raffle-col"
        >
          <ion-card
            class="raffle-card"
            (click)="goToRaffleDetail(raffle._id)"
            tabindex="0"
          >
            <div class="card-image-container">
              <img
                src="https://media.istockphoto.com/id/1750326573/vector/raffle-icon-choosing-random-numbered-ticket-prize-giveaway.jpg?s=612x612&w=0&k=20&c=JJw2CNLGniwQj6UoA-68oMS7oIAclLc3cJ3wp-2GSJ8="
                [attr.alt]="'Raffle image for ' + raffle.title"
                loading="lazy"
                class="raffle-image"
              />
              <div class="image-overlay">
                <ion-button fill="solid" color="light" class="quick-view-btn">
                  <ion-icon name="eye-outline"></ion-icon>
                  Quick View
                </ion-button>
              </div>
            </div>

            <ion-card-header class="card-header">
              <ion-card-title class="raffle-title-text">{{ raffle.title }}</ion-card-title>
            </ion-card-header>

            <ion-card-content class="card-content">
              <p class="raffle-description">{{ raffle.description }}</p>

              <!-- Price Chip -->
              <ion-chip color="primary" class="price-chip">
                <ion-icon name="cash-outline"></ion-icon>
                <ion-label>${{ raffle.price }} / ticket</ion-label>
              </ion-chip>

              <!-- Progress Section -->
              <div class="progress-section">
                <ion-progress-bar
                  [value]="raffle.ticketsSold / raffle.totalTickets"
                  color="secondary"
                  class="progress-bar"
                ></ion-progress-bar>
                <small class="progress-text">{{ raffle.totalTicketsSold }} / {{ raffle.totalTicketsSold }} tickets sold</small>
              </div>

              <!-- Countdown Badge -->
              <ion-badge color="danger" class="countdown-badge" *ngIf="raffle.endsInDays <= 3">
                <ion-icon name="time-outline"></ion-icon>
                Ends in {{ raffle.endsInDays }} days!
              </ion-badge>

              <!-- Add to Cart Button (hover effect) -->
              <ion-button expand="block" color="primary" class="add-to-cart-btn">
                <ion-icon name="cart-outline" slot="start"></ion-icon>
                Add to Cart
              </ion-button>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>

      <!-- Empty State -->
      <ng-template #noRaffles>
        <ion-row>
          <ion-col size="12" class="text-center">
            <div class="no-raffles-message">
              <ion-icon
                name="ticket-outline"
                class="empty-state-icon"
              ></ion-icon>
              <h3>No Recent Raffles</h3>
              <p>Check back soon for exciting new raffles!</p>
            </div>
          </ion-col>
        </ion-row>
      </ng-template>
    </ion-grid>

    <!-- Explore Section -->
    <section class="explore-raffles">
      <ion-card class="explore-card">
        <div class="explore-content">
          <ion-card-header class="explore-header">
            <ion-card-title>Explore All Raffles</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p class="explore-description">
              Discover all our exciting raffles and get a chance to win amazing
              prizes while supporting children who are deaf and hard of hearing.
            </p>
            <ion-button expand="block" color="primary" routerLink="/view-raffles" class="explore-btn">
              <ion-icon name="ticket-outline" slot="start"></ion-icon>
              View All Raffles
            </ion-button>
          </ion-card-content>
        </div>
      </ion-card>
    </section>
  </ion-content>

  <!-- Footer -->
  <app-app-footer ></app-app-footer>
</ion-app>

